<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pastel de Cumpleaños</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: #ffeeb6fd; /* Fondo oscuro para resaltar el pastel */
    }

    /* Nuevo contenedor principal para el pastel */
    .cake-wrapper {
      position: relative;
      width: 70vw; /* Ancho del 70% del viewport */
      max-width: 500px; /* Un ancho máximo para pantallas grandes */
      aspect-ratio: 1 / 1; /* Mantiene la proporción cuadrada, ajusta si es necesario */
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .cake-container {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .cake {
      position: relative;
      display: flex;
      flex-direction: column-reverse; /* Pone el primer div (base) abajo */
      align-items: center;
    }

    .tier {
      position: relative;
      background: linear-gradient(to bottom, #f03aa4, #ff4bb4, #f8f8f8); /* Glaseado blanco */
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      border-radius: 8px 8px 0 0;
    }

    /* Piso inferior del pastel */
    .tier-bottom {
      width: 78vw; /* Relativo */
      height: 31.2vw; /* Relativo */
      background-color: #000000; /* Color rojo para la base */
      border-radius: 50% / 4vw; /* Relativo */
      z-index: 2;
    }
    
    /* Decoración de glaseado para el piso inferior */
    .tier-bottom::before {
      content: '';
      position: absolute;
      left: 0;
      right: 0;
      height: 30px;
      max-height: 6vw; /* Relativo */
      background: #f03aa4;
      border-radius: 50% / 4vw; /* Relativo */
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    /* Piso superior del pastel */
    .tier-top {
      width: 57.2vw; /* Relativo */
      height: 26vw; /* Relativo */
      top: 7.8vw; /* Relativo */
      background-color: #00ff40; /* Color amarillo para el piso superior */
      margin-bottom: 2.6vw; /* Relativo */
      border-radius: 50% / 4vw; /* Relativo */
      z-index: 3;
      display: flex;
      justify-content: center;
    }

    /* Decoración de glaseado para el piso superior */
    .tier-top::before {
      content: '';
      position: absolute;
      left: 0;
      right: 0;
      height: 30px;
      max-height: 6vw; /* Relativo */
      background: #f03aa4;
      border-radius: 50% / 4vw; /* Relativo */
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .candles {
      position: absolute;
      top: -20vw; /* Relativo */
      display: flex;
      align-items: flex-end;
      gap: 1vw; /* Relativo */
    }

    .candle-number {
      position: relative;
      width: 15vw; /* Relativo */
      height: 30vw; /* Relativo */
    }

    /* Estilo base para las piezas de las velas */
    .candle-one, .candle-two::before, .candle-two::after {
        background: repeating-linear-gradient(
            45deg,
            #e91e63, /* Fucsia */
            #e91e63 5px, /* Línea fucsia */
            #9b59b6 5px, /* Violeta complementario */
            #9b59b6 10px /* Línea violeta */
        );
        }

        /* Vela con forma del número 1 */
    .candle-one {
      position: relative;
      width: 15vw; /* Relativo */
      height: 30vw; /* Relativo */
      font-size: 24vw; /* Relativo */
      font-weight: bold;
      font-family: "Comic Sans MS", cursive, sans-serif; /* Usamos Comic Sans */
      color: transparent; /* Hacemos el número invisible para que se vea solo el fondo con rayas */
      background: repeating-linear-gradient(
        45deg, 
          #3498db, 
          #3498db 5px, 
          #2980b9 5px, 
          #2980b9 10px
      ); /* Rayas azul claro y oscuro */
      -webkit-background-clip: text; /* Aplicamos el gradiente solo al texto */
      background-clip: text; /* Para que el fondo solo se vea en el número */
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    .candle-one::before { 
      /* Curva superior del número 1 */
      content: '1'; /* Colocamos el número 1 aquí */
      position: absolute;
      top: 0;
      left: 0;
      width: 15vw; /* Relativo */
      height: 24vw; /* Relativo */
      font-size: 24vw; /* Relativo */
      font-weight: bold;
      font-family: "Comic Sans MS", cursive, sans-serif; /* Usamos Comic Sans */
      color: transparent;
      background: repeating-linear-gradient(
        45deg, 
          #3498db, 
          #3498db 5px, 
          #2980b9 5px, 
          #2980b9 10px
      );
      -webkit-background-clip: text;
      background-clip: text;
    }

    /* Vela con forma del número 2 */
    .candle-two {
      position: relative;
      width: 15vw; /* Relativo */
      height: 30vw; /* Relativo */
      font-size: 22.4vw; /* Relativo */
      font-weight: bold;
      font-family: "Comic Sans MS", cursive, sans-serif; /* Usamos Comic Sans */
      color: transparent; /* Hacemos el número invisible para que se vea solo el fondo con rayas */
      background: repeating-linear-gradient(
          45deg, 
          #3498db, 
          #3498db 5px, 
          #2980b9 5px, 
          #2980b9 10px
      ); /* Rayas azul claro y oscuro */
      -webkit-background-clip: text; /* Aplicamos el gradiente solo al texto */
      background-clip: text; /* Para que el fondo solo se vea en el número */
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    .candle-two::before { 
      /* Curva superior del número 2 */
      content: '2'; /* Colocamos el número 2 aquí */
      position: absolute;
      top: 0;
      left: 0;
      width: 15vw; /* Relativo */
      height: 24vw; /* Relativo */
      font-size: 22.4vw; /* Relativo */
      font-weight: bold;
      font-family: "Comic Sans MS", cursive, sans-serif; /* Usamos Comic Sans */
      color: transparent;
      background: repeating-linear-gradient(
          45deg, 
          #3498db, 
          #3498db 5px, 
          #2980b9 5px, 
          #2980b9 10px
      );
      -webkit-background-clip: text;
      background-clip: text;
    }

    .flame {
      position: absolute;
      top: -1vw; /* Relativo */
      left: 50%;
      transform: translateX(-50%);
      width: 4.8vw; /* Relativo */
      height: 8.4vw; /* Relativo */
      background: radial-gradient(
    ellipse at center, /* Define la forma y posición del degradado */
    #f32c16 0%,   /* Rojo en el centro (más caliente) */
    #f35912 40%,  /* Naranja en el medio */
    #ff9100 100%  /* Azul en el borde (más frío) */
  );
      border-radius: 50% 50% 50% 50% / 70% 70% 30% 30%; /* Ajusta los valores para dar el efecto de puntita */
      box-shadow: 0 0 10px #f39c12, 0 0 20px #f39c12, 0 0 30px #e67e22;
      animation: flicker 1.5s infinite;
    }

    /* Clase para ocultar las llamas al hacer clic */
    .flame.hidden {
      display: none;
    }


    /* Ajuste de la llama para el número 1 */
    .candle-one .flame {
      top: -1vw; /* Relativo */
      left: 50%;
    }

    @keyframes flicker {
      0%, 100% { opacity: 1; transform: translateX(-50%) scaleY(1); }
      50% { opacity: 0.8; transform: translateX(-50%) scaleY(0.95); }
    }

    .plate {
      width: 94vw; /* Relativo */
      height: 8vw; /* Relativo */
      top: 54vw; /* Relativo */
      background-color: #ffffff;
      border-radius: 50% / 4vw; /* Relativo */
      box-shadow: 0 8px 10px rgba(0, 0, 0, 0.3);
      position: absolute;
      bottom: -10px;
      z-index: 1;
    }

        .confetti-container {
            z-index: 9999;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
        }
        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 15px;
            background-color: red;
            opacity: 0.8;
            transform-origin: left top;
            animation: fall linear infinite;
        }
        @keyframes fall {
            0% { transform: translateY(0) rotate(0); }
            100% { transform: translateY(100vh) rotate(720deg); }
        }

    .star-container {
        z-index: 1000; /* Asegúrate de que la estrella esté por delante del pastel */
        position: absolute;
        /* Los estilos de posición ahora se definen en clases individuales */
        width: 9vw; /* Relativo */
        height: 9vw; /* Relativo */
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .star-outline {
        position: absolute;
        width: 110%; /* Ligeramente más grande para crear el borde */
        height: 110%;
        background: black;
        clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
    }

    .star {
        width: 100%;
        height: 100%;
        position: relative;
        background: radial-gradient(ellipse at center, #fbff00 0%, #fbff00 100%);
        clip-path: polygon(
            50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%
        );
    }

    /* --- Posiciones individuales para cada estrella --- */
    /* Modifica los valores de top, left y rotate para cada estrella como desees */
    .star-1 {
        top: 14vw;
        left: 16vw;
        transform: translateX(-50%) rotate(50deg);
    }
    .star-2 {
        top: 22vw;
        left: 32vw;
        transform: rotate(-30deg);
    }
    .star-3 {
        top: 18vw;
        left: 50vw;
        transform: rotate(15deg);
    }
    .star-4 {
        top: 45vw;
        left: 4vw;
        transform: rotate(25deg);
    }
    .star-5 {
        top: 37vw;
        left: 16vw;
        transform: rotate(-25deg);
    }
    .star-6 {
        top: 48vw;
        left: 30vw;
        transform: rotate(-60deg);
    }
    .star-7 {
        top: 40vw;
        left: 45vw;
        transform: rotate(20deg);
    }
    .star-8 {
        top: 45vw;
        left: 66vw;
        transform: rotate(-10deg);
    }

    /* --- Estilos para la nota de papel --- */
    .note-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.6); /* Fondo semitransparente */
      z-index: 10000;
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.5s ease, visibility 0.5s ease;
    }

    .note-container.visible {
      opacity: 1;
      visibility: visible;
    }

    .paper-note {
      background-color: #fffef0; /* Color de papel antiguo */
      padding: 30px 40px;
      border-radius: 5px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
      font-family: 'Comic Sans MS', cursive, sans-serif; /* Misma fuente que las velas */
      font-size: 28px; /* Aumentado */
      color: #333;
      text-align: center;
      max-width: 80%;
      /* Empieza fuera de la pantalla (abajo) */
      transform: translateY(100vh);
      /* Transición suave para la animación de entrada */
      transition: transform 1.2s cubic-bezier(0.25, 1, 0.5, 1);
      /* --- ¡Aquí ocurre la magia! --- */
      filter: url(#paper-texture-filter);
    }

    .note-container.visible .paper-note {
      transform: translateY(0); /* Vuelve a su posición original en el centro */
    }
  </style>
  <!-- Estilos específicos para pantallas más grandes para evitar que se vea gigante -->
  <style>
    @media (min-width: 715px) { /* 500px / 0.7 = ~714px */
      .tier-bottom { width: 390px; height: 156px; border-radius: 50% / 20px; }
      .tier-bottom::before { max-height: 30px; border-radius: 50% / 20px; }
      .tier-top { width: 286px; height: 130px; top: 39px; margin-bottom: 13px; border-radius: 50% / 20px; }
      .tier-top::before { max-height: 30px; border-radius: 50% / 20px; }
      .candles { top: -100px; gap: 5px; }
      .candle-number { width: 75px; height: 150px; }
      .candle-one { font-size: 120px; width: 75px; height: 150px; }
      .candle-one::before { font-size: 120px; width: 75px; height: 120px; }
      .candle-two { font-size: 112px; width: 75px; height: 150px; }
      .candle-two::before { font-size: 112px; width: 75px; height: 120px; }
      .flame { top: -5px; width: 24px; height: 42px; }
      .candle-one .flame { top: -5px; }
      .plate { width: 470px; height: 40px; top: 270px; border-radius: 50% / 20px; }
      .star-container { width: 45px; height: 45px; }
      .star-1 { top: 70px; left: 80px; }
      .star-2 { top: 110px; left: 160px; }
      .star-3 { top: 90px; left: 250px; }
      .star-4 { top: 225px; left: 20px; }
      .star-5 { top: 185px; left: 80px; }
      .star-6 { top: 240px; left: 150px; }
      .star-7 { top: 200px; left: 225px; }
      .star-8 { top: 225px; left: 330px; }
    }
  </style>
</head>
<body>
  <div class="cake-wrapper">
    <div class="cake-container">
      <div class="cake">
        <div class="tier tier-bottom"></div>
        <div class="tier tier-top">
          <div class="candles">
            <div class="candle-number candle-two"><div class="flame"></div></div>
            <div class="candle-number candle-one"><div class="flame"></div></div>
          </div>
        </div>
      </div>
      <div class="plate"></div>
      <div class="star-container star-1"><div class="star-outline"></div><div class="star"></div></div>
      <div class="star-container star-2"><div class="star-outline"></div><div class="star"></div></div>
      <div class="star-container star-3"><div class="star-outline"></div><div class="star"></div></div>
      <div class="star-container star-4"><div class="star-outline"></div><div class="star"></div></div>
      <div class="star-container star-5"><div class="star-outline"></div><div class="star"></div></div>
      <div class="star-container star-6"><div class="star-outline"></div><div class="star"></div></div>
      <div class="star-container star-7"><div class="star-outline"></div><div class="star"></div></div>
      <div class="star-container star-8"><div class="star-outline"></div><div class="star"></div></div>
    </div>
    </div>
  </div>
  <div class="confetti-container" id="confetti"></div>
  <svg style="display: none;">
        <filter id="paper-texture-filter">
            <!-- 
              Genera un ruido fractal (Perlin noise).
              - baseFrequency: Controla qué tan "zoom" o "movido" es el ruido. 
                Valores más bajos = ondas más suaves. Valores más altos = más granulado.
              - numOctaves: Añade capas de detalle al ruido. Más octavas = más complejo.
            -->
            <feTurbulence 
                type="fractalNoise" 
                baseFrequency="0.02" 
                numOctaves="5" 
                result="noise" />
            
            <!--
              Usa el ruido generado ("noise") para desplazar los píxeles del elemento.
              - in="SourceGraphic": Le dice que actúe sobre el elemento original.
              - scale: La intensidad del desplazamiento. ¡Este es el valor clave para controlar
                qué tan "roto" o irregular es el borde!
            -->
            <feDisplacementMap 
                in="SourceGraphic" 
                in2="noise" 
                scale="15" 
                xChannelSelector="R" 
                yChannelSelector="G" />
        </filter>
    </svg>
  <!-- Contenedor de la nota de papel (inicialmente oculto) -->
  <div class="note-container" id="note-container">
    <div class="paper-note">
      ¡Feliz Cumpleaños, mi amor!<br>Eres lo mejor que me ha pasado.<br>Te amo ❤️
    </div>
  </div>
  
  <!-- Audio para la canción de cumpleaños -->
  <audio id="birthday-song" loop>
    <!-- IMPORTANTE: Reemplaza la URL de abajo con tu enlace directo de Google Drive -->
    <source src="https://drive.google.com/uc?export=download&id=TU_ID_DE_ARCHIVO_AQUI" type="audio/mp3">
  </audio>

  <script>
        function createConfettiPiece() {
        const confetti = document.createElement("div");
        confetti.classList.add("confetti-piece");
        
        const colors = ["#f00", "#0f0", "#00f", "#ff0", "#f0f", "#0ff"];
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        
        confetti.style.left = Math.random() * 100 + "vw";
        confetti.style.animationDuration = (Math.random() * 2 + 2) + "s";
        confetti.style.width = Math.random() * 10 + 5 + "px";
        confetti.style.height = Math.random() * 15 + 10 + "px";
        
        document.getElementById("confetti").appendChild(confetti);
        
        setTimeout(() => {
            confetti.remove();
        }, 5000);
    }
    
    setInterval(createConfettiPiece, 100);

    // Añade un retraso aleatorio a la animación de cada llama para un efecto más natural
    document.querySelectorAll('.flame').forEach(flame => {
      flame.style.animationDelay = `${Math.random() * 0.5}s`;
    });

    // --- NUEVA FUNCIÓN ---
    // Función para apagar las velas y reproducir la música
    function startCelebration() {
      // Ocultar todas las llamas
      document.querySelectorAll('.flame').forEach(flame => {
        flame.classList.add('hidden');
      });

      // Reproducir la canción
      const song = document.getElementById('birthday-song');
      song.play();

      // Mostrar la nota de papel después de un breve retraso
      setTimeout(() => {
        const noteContainer = document.getElementById('note-container');
        noteContainer.classList.add('visible');
      }, 500); // 500ms de retraso para que no sea tan brusco
    }

    // Añadir un event listener para que se ejecute una sola vez al hacer clic en cualquier parte
    document.addEventListener('click', startCelebration, { once: true });
  </script>

</body>
</html>
